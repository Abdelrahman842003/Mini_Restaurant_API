# Mini Restaurant Reservation System

ูุธุงู ุญุฌุฒ ุงููุทุงุนู ุงููุตุบุฑ ูู ููุตุฉ ุดุงููุฉ ุชุชูุญ ููุนููุงุก ุญุฌุฒ ุงูุทุงููุงุช ูุนุฑุถ ููุงุฆู ุงูุทุนุงู ูุชูุฏูู ุงูุทูุจุงุช ูุฅูุดุงุก ุงูููุงุชุฑ ูุน ูุธุงู ุฏูุน ูุชุทูุฑ ูุฏุนู ุจูุงุจุงุช ูุชุนุฏุฏุฉ.

## ๐ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ (v2.0)

### ๐ณ ูุธุงู ุงูุฏูุน ุงููุชุทูุฑ
- **Factory Pattern** ูุฅุฏุงุฑุฉ ุจูุงุจุงุช ุงูุฏูุน ุฏููุงููููุงู
- **Strategy Pattern** ูุญุณุงุจ ุงูุถุฑุงุฆุจ ูุงูุฑุณูู
- **3 ุจูุงุจุงุช ุฏูุน**: PayPal, Stripe, Paymob (ูุน InstaPay)
- **Universal Callback Handler** ููุญุฏ ูุฌููุน ุงูุจูุงุจุงุช
- **HMAC Security** ููุญูุงูุฉ ุงูุฃูููุฉ
- **Payment Verification** ุงููุจุงุดุฑ ูู APIs

### ๐๏ธ Architecture ุงููุญุณูุฉ
- **Clean Code** ูุชุจุน ููุจุงุฏุฆ SOLID
- **Open/Closed Principle** ูุฅุถุงูุฉ ุจูุงุจุงุช ุฌุฏูุฏุฉ
- **Interface Segregation** ูููุตู ุจูู ุงููุณุคูููุงุช
- **Dependency Inversion** ูููุฑููุฉ ูุงูุงุฎุชุจุงุฑ

## ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### ๐ ูุธุงู ุงููุตุงุฏูุฉ
- ุชุณุฌูู ุญุณุงุจ ุฌุฏูุฏ
- ุชุณุฌูู ุงูุฏุฎูู ูุงูุฎุฑูุฌ
- ูุตุงุฏูุฉ ุขููุฉ ุจุงุณุชุฎุฏุงู Laravel Sanctum

### ๐ฝ๏ธ ุฅุฏุงุฑุฉ ูุงุฆูุฉ ุงูุทุนุงู
- ุนุฑุถ ุงูุฃุตูุงู ุงููุชุงุญุฉ ููุท
- ุฅุฏุงุฑุฉ ุงููููุงุช ุงูููููุฉ ุงููุญุฏูุฏุฉ
- ุฅุนุงุฏุฉ ุชุนููู ุงููููุงุช ุชููุงุฆูุงู ููููุงู

### ๐ช ุฅุฏุงุฑุฉ ุงูุทุงููุงุช ูุงูุญุฌูุฒุงุช
- ูุญุต ุชููุฑ ุงูุทุงููุงุช ุญุณุจ ุงูุชุงุฑูุฎ ูุงูููุช ูุนุฏุฏ ุงูุถููู
- ุญุฌุฒ ุงูุทุงููุงุช ุงููุชุงุญุฉ
- ููุน ุงูุญุฌุฒ ุงููุฒุฏูุฌ ููุทุงููุฉ ุงููุงุญุฏุฉ

### ๐ ูุงุฆูุฉ ุงูุงูุชุธุงุฑ
- ุงูุถูุงู ุงูุนููุงุก ููุงุฆูุฉ ุงูุงูุชุธุงุฑ ุนูุฏ ุงูุชูุงุก ุงูุทุงููุงุช
- ุฅุฏุงุฑุฉ ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุจูุธุงู ุงูุฃููููุฉ

### ๐ ุฅุฏุงุฑุฉ ุงูุทูุจุงุช
- ุชูุฏูู ุทูุจุงุช ูู ุงูุฃุตูุงู ุงููุชุงุญุฉ
- ุงูุชุญูู ูู ุงููููุงุช ุงููุชุงุญุฉ ูุจู ุชุฃููุฏ ุงูุทูุจ
- ุชุทุจูู ุงูุฎุตููุงุช ุนูู ุงูุฃุตูุงู
- ุญุณุงุจ ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ

### ๐ณ ูุธุงู ุงูุฏูุน ุงููุชุทูุฑ
- **3 ุจูุงุจุงุช ุฏูุน ูุฏุนููุฉ**:
  - **PayPal**: ุฏูุน ุนุงููู ุขูู
  - **Stripe**: ุฏูุน ุจุงูุจุทุงูุงุช ุงูุงุฆุชูุงููุฉ
  - **Paymob**: ุฏูุน ูุญูู ู๏ฟฝ๏ฟฝุฑู (ูุงุฑุช + InstaPay)
- **ุฎูุงุฑูู ููุฏูุน**:
  - **ุงูุฎูุงุฑ ุงูุฃูู**: 14% ุถุฑุงุฆุจ + 20% ุฑุณูู ุฎุฏูุฉ
  - **ุงูุฎูุงุฑ ุงูุซุงูู**: 15% ุฑุณูู ุฎุฏูุฉ ููุท
- **ุฏุนู InstaPay**: ูุญุงูุธ ุงููุงุชู ุงููุญููู ุงููุตุฑูุฉ
- ุฅูุดุงุก ูุงุชูุฑุฉ ููุตูุฉ ุจุนุฏ ุงูุฏูุน

## ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

- **Laravel 11** - ุฅุทุงุฑ ุงูุนูู ุงูุฃุณุงุณู
- **Laravel Sanctum** - ูุธุงู ุงููุตุงุฏูุฉ
- **MySQL** - ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **Pest** - ุฅุทุงุฑ ุงูุงุฎุชุจุงุฑุงุช
- **Repository Pattern** - ููุท ุชุตููู ููุจูุงูุงุช
- **Service Layer** - ุทุจูุฉ ุงูุฎุฏูุงุช
- **Strategy Pattern** - ููุท ุงูุงุณุชุฑุงุชูุฌูุฉ ููุฏูุน
- **Factory Pattern** - ูุตูุน ุจูุงุจุงุช ุงูุฏูุน
- **PayPal SDK** - ุชูุงูู PayPal
- **Stripe SDK** - ุชูุงูู Stripe
- **Paymob API** - ุชูุงูู Paymob ูุน InstaPay

## API Endpoints

### ุงููุตุงุฏูุฉ
```http
POST /api/auth/register     # ุชุณุฌูู ุญุณุงุจ ุฌุฏูุฏ
POST /api/auth/login        # ุชุณุฌูู ุงูุฏุฎูู
POST /api/auth/logout       # ุชุณุฌูู ุงูุฎุฑูุฌ
GET  /api/auth/me          # ูุนูููุงุช ุงููุณุชุฎุฏู
```

### ูุงุฆูุฉ ุงูุทุนุงู
```http
GET /api/v1/menu           # ุนุฑุถ ูุงุฆูุฉ ุงูุทุนุง๏ฟฝ๏ฟฝ
```

### ุงูุทุงููุงุช ูุงูุญุฌูุฒุงุช
```http
GET  /api/v1/tables                    # ุนุฑุถ ุงูุทุงููุงุช
GET  /api/v1/tables/availability       # ูุญุต ุงูุชููุฑ
POST /api/v1/reservations              # ุญุฌุฒ ุทุงููุฉ
GET  /api/v1/reservations              # ุนุฑุถ ุงูุญุฌูุฒุงุช
```

### ุงูุทูุจุงุช
```http
POST /api/v1/orders                    # ุชูุฏูู ุทูุจ ุฌุฏูุฏ
GET  /api/v1/orders                    # ุนุฑุถ ุงูุทูุจุงุช
GET  /api/v1/orders/{id}               # ุชูุงุตูู ุทูุจ
```

### ูุธุงู ุงูุฏูุน ุงูุฌุฏูุฏ
```http
# ูุนูููุงุช ุงูุฏูุน
GET  /api/v1/payment-methods           # ุฎูุงุฑุงุช ุงูุฏูุน
GET  /api/v1/payment-gateways          # ุจูุงุจุงุช ุงูุฏูุน ุงููุชุงุญุฉ

# ูุนุงูุฌุฉ ุงูุฏูุน
POST /api/v1/orders/{id}/pay           # ุฏูุน ุทูุจ (PayPal ููุท)

# ุญุงูุฉ ุงูุฏูุน ูุงูููุงุชูุฑ
GET  /api/v1/orders/{id}/payment-status     # ุญุงูุฉ ุงูุฏูุน
GET  /api/v1/invoices/{id}                  # ุชูุงุตูู ุงููุงุชูุฑุฉ
GET  /api/v1/payment/{gateway}/verify/{transactionId}  # ุชุญูู ูู ุงูุฏูุน

# Callbacks ูุงูุฅุดุนุงุฑุงุช (ุนุงูุฉ - ุจุฏูู ูุตุงุฏูุฉ)
POST /api/payment/{gateway}/callback         # ูุนุงูุฌ ุนุงู ููุงุณุชุฌุงุจุงุช
GET  /api/payment/paypal/success            # ูุฌุงุญ PayPal
GET  /api/payment/paypal/cancel             # ุฅูุบุงุก PayPal
POST /api/webhooks/stripe                   # webhook ูู Stripe
POST /api/webhooks/paymob                   # webhook ูู Paymob
```

### ูุงุฆูุฉ ุงูุงูุชุธุงุฑ
```http
POST /api/v1/waiting-list              # ุงูุถูุงู ููุงุฆูุฉ ุงูุงูุชุธุงุฑ
GET  /api/v1/waiting-list              # ุนุฑุถ ูุงุฆูุฉ ุงูุงูุชุธุงุฑ
DELETE /api/v1/waiting-list/{id}       # ูุบุงุฏุฑุฉ ูุงุฆูุฉ ุงูุงูุชุธุงุฑ
```

## ๐๏ธ ุงูุชุซุจูุช ูุงูุฅุนุฏุงุฏ

### 1. ุงุณุชูุณุงุฎ ุงููุดุฑูุน
```bash
git clone <repository-url>
cd mini-restaurant-system
```

### 2. ุชุซุจูุช ุงูุชุจุนูุงุช
```bash
composer install
npm install
```

### 3. ุฅุนุฏุงุฏ ุงูุจูุฆุฉ
```bash
cp .env.example .env
php artisan key:generate
```

### 4. ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช
```bash
# ุชุญุฏูุซ ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู .env
php artisan migrate --seed
```

### 5. ุฅุนุฏุงุฏ ุจูุงุจุงุช ุงูุฏูุน
```bash
# ุฅุถุงูุฉ ููุงุชูุญ API ูู .env
PAYPAL_CLIENT_ID=your_paypal_client_id
PAYPAL_CLIENT_SECRET=your_paypal_client_secret
STRIPE_PUBLIC_KEY=pk_test_your_stripe_public_key
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
PAYMOB_API_KEY=your_paymob_api_key
PAYMOB_INTEGRATION_ID=your_integration_id
PAYMOB_INSTAPAY_INTEGRATION_ID=your_instapay_integration_id
```

### 6. ุชุดุบูู ุงูุฎุงุฏู
```bash
php artisan serve
```

## ๐ณ ูุธุงู ุงูุฏูุน - ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ุฏูุน ุจู Stripe
```json
POST /api/v1/orders/123/pay
{
    "payment_option": 1,
    "payment_gateway": "stripe",
    "payment_data": {
        "currency": "usd"
    }
}
```

### ุฏูุน ุจู PayPal
```json
POST /api/v1/orders/123/pay
{
    "payment_option": 2,
    "payment_gateway": "paypal",
    "payment_data": {
        "currency": "USD"
    }
}
```

### ุฏูุน ุจู InstaPay (Paymob)
```json
POST /api/v1/orders/123/pay
{
    "payment_option": 1,
    "payment_gateway": "paymob",
    "payment_data": {
        "payment_method": "instapay",
        "mobile_number": "+201234567890",
        "currency": "EGP"
    }
}
```

## ๐ ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฌุฏุงูู ุงูุฑุฆูุณูุฉ
- `users` - ุงููุณุชุฎุฏููู
- `tables` - ุงูุทุงููุงุช
- `menu_items` - ุฃุตูุงู ุงูุทุนุงู
- `reservations` - ุงูุญุฌูุฒุงุช
- `orders` - ุงูุทูุจุงุช
- `order_items` - ุชูุงุตูู ุงูุทูุจุงุช
- `invoices` - ุงูููุงุชูุฑ (ูุญุฏุซ ุจุฏุนู ุจูุงุจุงุช ุงูุฏูุน)
- `waiting_list_entries` - ูุงุฆูุฉ ุงูุงูุชุธุงุฑ

### ุงูุญููู ุงูุฌุฏูุฏุฉ ูู ุฌุฏูู ุงูููุงุชูุฑ
- `payment_gateway` - ุจูุงุจุฉ ุงูุฏูุน ุงููุณุชุฎุฏูุฉ
- `transaction_id` - ุฑูู ุงููุนุงููุฉ
- `payment_status` - ุญุงูุฉ ุงูุฏูุน
- `payment_details` - ุชูุงุตูู ุงูุฏูุน (JSON)

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช
```bash
php artisan test
# ุฃู
./vendor/bin/pest
```

### ูุฌููุนุฉ Postman
ูุชุถูู ุงููุดุฑูุน ูุฌููุนุฉ Postman ูุงููุฉ ูุน ุฃูุซูุฉ ูุฌููุน ุงูู endpoints:
- `Mini_Restaurant_API.postman_collection.json`

## ๐ ุงููุซุงุฆู ุงูุชูุตูููุฉ

ููุญุตูู ุนูู ุฏููู ุดุงูู ููุธุงู ุงูุฏูุนุ ุฑุงุฌุน:
- [ุฏููู ูุธุงู ุงูุฏูุน ุงูุดุงูู](PAYMENT_SYSTEM_COMPLETE_GUIDE.md)

## ๐๏ธ ุงููุนูุงุฑูุฉ

### Design Patterns ุงููุณุชุฎุฏูุฉ
- **Repository Pattern**: ููุตู ููุทู ุงููุตูู ููุจูุงูุงุช
- **Service Layer Pattern**: ูููุทู ุงูุฃุนูุงู
- **Strategy Pattern**: ูุญุณุงุจ ุงูุถุฑุงุฆุจ ูุงูุฑุณูู
- **Factory Pattern**: ูุฅูุดุงุก ุจูุงุจุงุช ุงูุฏูุน
- **Observer Pattern**: ููุฅุดุนุงุฑุงุช (ูุณุชูุจููุงู)

### ูุจุงุฏุฆ SOLID ุงููุทุจูุฉ
- **Single Responsibility**: ูู ููุงุณ ูู ูุณุคูููุฉ ูุงุญุฏุฉ
- **Open/Closed**: ููุชูุญ ููุชูุณุนุ ูุบูู ููุชุนุฏูู
- **Interface Segregation**: ูุตู ุงููุงุฌูุงุช
- **Dependency Inversion**: ุงูุงุนุชูุงุฏ ุนูู ุงูุชุฌุฑูุฏุงุช

## ๐ ุงูุฃูุงู

### ุงูููุฒุงุช ุงูุฃูููุฉ
- ูุตุงุฏูุฉ ุขููุฉ ุจุงุณุชุฎุฏุงู Laravel Sanctum
- ุชุดููุฑ ูููุงุช ุงููุฑูุฑ
- ุญูุงูุฉ CSRF
- ุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
- HMAC verification ูู Paymob callbacks
- Webhook signature verification ูู Stripe
